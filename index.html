<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Survival â†’ Stability Finance System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: #e5e7eb;
  padding: 15px;
}
h1 { color: #38bdf8; }
.box {
  background: #020617;
  padding: 15px;
  margin-bottom: 15px;
  border-radius: 10px;
}
label {
  display: block;
  margin-top: 8px;
}
input, select {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
  border-radius: 6px;
  border: none;
}
button {
  margin-top: 15px;
  padding: 10px;
  width: 100%;
  background: #22c55e;
  color: black;
  font-size: 16px;
  border: none;
  border-radius: 8px;
}
.alert {
  padding: 12px;
  margin-top: 10px;
  border-radius: 8px;
}
.green { background: #16a34a; }
.yellow { background: #ca8a04; }
.red { background: #dc2626; }
.small {
  font-size: 14px;
  color: #9ca3af;
}
</style>
</head>

<body>

<h1>ğŸ’¸ Survival â†’ Stability System</h1>
<p class="small">Cloud + Local Memory | Febâ€“March Survival | August Stability</p>

<div class="box">
<h3>ğŸ“… Daily Input</h3>

<label>Month</label>
<select id="month">
  <option>February</option>
  <option>March</option>
  <option>April</option>
  <option>May</option>
  <option>June</option>
  <option>July</option>
  <option>August+</option>
</select>

<label>Salary received today (â‚¹)</label>
<input type="number" id="salary" value="0">

<label>Trading Withdraw Today (â‚¹)</label>
<input type="number" id="withdraw" value="0">

<label>Grocery (â‚¹)</label>
<input type="number" id="grocery" value="0">

<label>Travel (â‚¹)</label>
<input type="number" id="travel" value="0">

<label>Other Essential (â‚¹)</label>
<input type="number" id="other" value="0">

<label>Mood</label>
<select id="mood">
  <option>ok</option>
  <option>tired</option>
  <option>stressed</option>
</select>

<button onclick="analyze()">Analyze & Save</button>
</div>

<div class="box">
<h3>ğŸ§  System Guidance</h3>
<div id="result"></div>
</div>

<script>
const CLOUD_URL = "https://script.google.com/macros/s/AKfycbycZmT_n66WVFc4t3CFyo7UM7mQg1BGeKHbcE04wH3o4waopuTvcJ44JCkDloMqOyuFtg/exec";

let history = JSON.parse(localStorage.getItem("financeHistory")) || [];

function analyze() {

  const month = document.getElementById("month").value;
  const salary = Number(document.getElementById("salary").value);
  const withdraw = Number(document.getElementById("withdraw").value);
  const grocery = Number(document.getElementById("grocery").value);
  const travel = Number(document.getElementById("travel").value);
  const other = Number(document.getElementById("other").value);
  const mood = document.getElementById("mood").value;

  const totalExpense = grocery + travel + other;
  const date = new Date().toLocaleDateString();

  history.push({
    date, month, salary, withdraw,
    grocery, travel, other,
    totalExpense, mood
  });

  localStorage.setItem("financeHistory", JSON.stringify(history));

  let totalWithdraw = history.reduce((a,b)=>a+b.withdraw,0);
  let totalExpenseAll = history.reduce((a,b)=>a+b.totalExpense,0);
  let netBalance = totalWithdraw - totalExpenseAll;

  // SAVE TO GOOGLE SHEET
  fetch(CLOUD_URL, {
    method: "POST",
    body: JSON.stringify({
      date,
      month,
      salary,
      withdraw,
      grocery,
      travel,
      other,
      totalExpense,
      mood,
      netBalance
    })
  });

  let msg = "";
  msg += `<div class='alert green'>ğŸ’¾ Data saved locally & to Google Sheet</div>`;
  msg += `<div class='alert'>ğŸ“Š Total Withdraw: â‚¹${totalWithdraw}</div>`;
  msg += `<div class='alert'>ğŸ’¸ Total Expense: â‚¹${totalExpenseAll}</div>`;
  msg += `<div class='alert'>ğŸ§® Net Balance: â‚¹${netBalance}</div>`;

  if (month === "February" || month === "March") {
    msg += "<div class='alert yellow'>ğŸŸ¡ SURVIVAL MODE ACTIVE</div>";
    if (totalExpense > 500)
      msg += "<div class='alert red'>âš ï¸ Daily limit crossed. Tighten tomorrow.</div>";
    if (mood !== "ok")
      msg += "<div class='alert red'>ğŸ§  Mood unstable â†’ NO TRADING NEXT DAY</div>";
  }

  if (month === "April" || month === "May" || month === "June" || month === "July") {
    msg += "<div class='alert yellow'>ğŸŸ  TRANSITION PHASE</div>";
  }

  if (month === "August+") {
    msg += "<div class='alert green'>ğŸŸ¢ STABILITY MODE: Start SIP, Gold, Emergency Fund</div>";
  }

  document.getElementById("result").innerHTML = msg;
}
</script>

</body>
</html>
