<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Survival ‚Üí Stability System (Safe)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: #e5e7eb;
  padding: 15px;
}
h1 { color: #38bdf8; }
.box {
  background: #020617;
  padding: 15px;
  margin-bottom: 15px;
  border-radius: 10px;
}
label { display:block; margin-top:8px; }
input, select {
  width:100%; padding:8px; margin-top:5px;
  border-radius:6px; border:none;
}
button {
  margin-top:15px; padding:12px; width:100%;
  background:#22c55e; color:black;
  font-size:16px; border:none; border-radius:8px;
}
.alert { padding:12px; margin-top:10px; border-radius:8px; }
.green { background:#16a34a; }
.yellow { background:#ca8a04; }
.red { background:#dc2626; }
.small { font-size:13px; color:#9ca3af; }
</style>
</head>

<body>

<h1>üí∏ Survival ‚Üí Stability System</h1>
<p class="small">
Safe storage ‚Ä¢ Cloud backup ‚Ä¢ Next-day guidance  
<br>(Does NOT touch other GitHub projects)
</p>

<div class="box">
<h3>üìÖ Daily Entry</h3>

<label>Month</label>
<select id="month">
  <option>February</option>
  <option>March</option>
  <option>April</option>
  <option>May</option>
  <option>June</option>
  <option>July</option>
  <option>August+</option>
</select>

<label>Salary received today (‚Çπ)</label>
<input type="number" id="salary" value="0">

<label>Trading Withdraw Today (‚Çπ)</label>
<input type="number" id="withdraw" value="0">

<label>Grocery (‚Çπ)</label>
<input type="number" id="grocery" value="0">

<label>Travel (‚Çπ)</label>
<input type="number" id="travel" value="0">

<label>Other Essential (‚Çπ)</label>
<input type="number" id="other" value="0">

<label>Mood</label>
<select id="mood">
  <option>ok</option>
  <option>tired</option>
  <option>stressed</option>
</select>

<button onclick="analyze()">Analyze ‚Ä¢ Save ‚Ä¢ Guide</button>
</div>

<div class="box">
<h3>üß† System Guidance</h3>
<div id="result"></div>
</div>

<script>
/* ================= CONFIG ================= */

const CLOUD_URL =
"https://script.google.com/macros/s/AKfycbycZmT_n66WVFc4t3CFyo7UM7mQg1BGeKHbcE04wH3o4waopuTvcJ44JCkDloMqOyuFtg/exec";

/*
  üîê SAFE STORAGE KEY
  This key is UNIQUE to this system.
  It will NOT affect any other GitHub project.
*/
const STORAGE_KEY = "financeHistory_survival_feb2026_v1";

/* ================= LOCAL MEMORY ================= */

let history = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

/* ================= NEXT DAY GUIDE ================= */

function nextDayGuide(last) {
  let g = "<div class='alert yellow'>üìÖ NEXT DAY GUIDANCE</div>";

  if (last.mood !== "ok") {
    g += "<div class='alert red'>‚ùå NO TRADING tomorrow. Rest first.</div>";
  } else {
    g += "<div class='alert green'>‚úÖ Trading allowed (strict discipline).</div>";
  }

  if (last.totalExpense > 500) {
    g += "<div class='alert red'>‚ö†Ô∏è Expense high today. Tomorrow limit = ‚Çπ400.</div>";
  } else {
    g += "<div class='alert green'>üëç Expense controlled. Tomorrow limit = ‚Çπ400‚Äì500.</div>";
  }

  if ((last.withdraw - last.totalExpense) <= 0) {
    g += "<div class='alert red'>üõë Balance tight. Essentials only tomorrow.</div>";
  }

  g += "<div class='alert'>üéØ Rule: Survival > Profit</div>";
  return g;
}

/* ================= MAIN LOGIC ================= */

function analyze() {

  const month = monthEl.value;
  const salary = +salaryEl.value;
  const withdraw = +withdrawEl.value;
  const grocery = +groceryEl.value;
  const travel = +travelEl.value;
  const other = +otherEl.value;
  const mood = moodEl.value;

  const totalExpense = grocery + travel + other;
  const date = new Date().toLocaleDateString();

  const entry = {
    date, month, salary, withdraw,
    grocery, travel, other,
    totalExpense, mood
  };

  history.push(entry);
  localStorage.setItem(STORAGE_KEY, JSON.stringify(history));

  const totalWithdraw = history.reduce((a,b)=>a+b.withdraw,0);
  const totalExpenseAll = history.reduce((a,b)=>a+b.totalExpense,0);
  const netBalance = totalWithdraw - totalExpenseAll;

  /* ---- CLOUD BACKUP ---- */
  fetch(CLOUD_URL, {
    method: "POST",
    body: JSON.stringify({
      ...entry,
      netBalance
    })
  });

  /* ---- UI OUTPUT ---- */
  let msg = "";
  msg += "<div class='alert green'>üíæ Saved safely (local + Google Sheet)</div>";
  msg += `<div class='alert'>üìä Total Withdraw: ‚Çπ${totalWithdraw}</div>`;
  msg += `<div class='alert'>üí∏ Total Expense: ‚Çπ${totalExpenseAll}</div>`;
  msg += `<div class='alert'>üßÆ Net Balance: ‚Çπ${netBalance}</div>`;

  if (month === "February" || month === "March") {
    msg += "<div class='alert yellow'>üü° SURVIVAL MODE ACTIVE</div>";
    if (totalExpense > 500) {
      msg += "<div class='alert red'>‚ö†Ô∏è Daily limit crossed today.</div>";
    }
  }

  if (month === "August+") {
    msg += "<div class='alert green'>üü¢ STABILITY MODE ‚Äì Start SIP & Gold</div>";
  }

  msg += nextDayGuide(entry);
  result.innerHTML = msg;
}

/* ================= ELEMENT SHORTCUTS ================= */

const monthEl = document.getElementById("month");
const salaryEl = document.getElementById("salary");
const withdrawEl = document.getElementById("withdraw");
const groceryEl = document.getElementById("grocery");
const travelEl = document.getElementById("travel");
const otherEl = document.getElementById("other");
const moodEl = document.getElementById("mood");
const result = document.getElementById("result");

</script>

</body>
</html>
